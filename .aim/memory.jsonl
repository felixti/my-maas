{"type":"_aim","source":"mcp-knowledge-graph"}
{"type":"entity","name":"MaaS","entityType":"project","observations":["Memory as a Service — FastAPI microservice providing STM and LTM for AI agents","Python 3.12, FastAPI, AsyncIO, uv package manager","Ruff linter with strict rules (E,W,F,I,N,UP,B,A,C4,SIM,TCH,RUF,S,DTZ,PT,RET,ARG)","pytest + pytest-asyncio (85 unit + 19 integration tests)","STM backend: Redis 7 (sorted sets)","LTM engine: mem0 v1.0.3 (AsyncMemory) → DocumentDB Local (dev) / Azure DocumentDB (prod)","Observability: OpenTelemetry → OTEL Collector → Langfuse + OpenLIT","Docker multi-stage with uv, docker-compose has 7+ services","All 13 build phases complete (Scaffold → CI/CD Pipeline)","17 API endpoints total (1 health, 5 STM, 11 LTM)"]}
{"type":"entity","name":"CodingConventions","entityType":"convention","observations":["from __future__ import annotations — every Python file, first line","Annotated[Type, Depends(fn)] — all FastAPI dependencies (never = Depends(fn))","TYPE_CHECKING blocks — type-only imports inside if TYPE_CHECKING:","# noqa: TC001 — for pydantic field types needing runtime access","StrEnum — all enums inherit from StrEnum","No type suppression — never as any, @ts-ignore, empty catch","Async everywhere — Redis and LLM calls always async","Error handling — logger.exception() in except blocks","Ruff line-length = 120, quote-style = double, indent-style = space"]}
{"type":"entity","name":"ProjectLayout","entityType":"structure","observations":["Source root: src/maas/","Main modules: main.py, config.py, dependencies.py","Sub-packages: llm/, stm/, ltm/, vector_stores/, observability/","Tests: tests/unit/ and tests/integration/","Config: pyproject.toml, .env.example, docker-compose.yml, otel/","API docs (http/): http/ directory for .http files","AGENTS.md at project root"]}
{"type":"entity","name":"DevSetup","entityType":"procedure","observations":["cp .env.example .env — then set LLM_API_KEY and EMBEDDING_API_KEY","uv sync — install all dependencies (needs Python 3.12)","docker compose up -d redis documentdb — backing services for local dev","uv run uvicorn maas.main:app --reload — run dev server on port 8000","uv run pytest tests/unit/ -v — 85 unit tests","uv run pytest tests/integration/ -v -m integration — 19 integration tests (requires Docker)","uv run ruff check src/ tests/ — lint","uv run ruff format --check src/ tests/ — format check"]}
{"type":"entity","name":"KeyGotchas","entityType":"reference","observations":["importlib must be set on builtins in main.py (mem0 uses builtins.importlib)","S105 false positive on TOKEN_THRESHOLD string — suppressed with # noqa: S105","Azure DocumentDB requires retrywrites=false in connection string","mem0 MongoDBConfig has strict field validation — only pass expected fields","Integration tests require Docker daemon running (testcontainers)","Batch endpoints use POST for all operations (including delete)","Azure OpenAI requires AsyncAzureOpenAI (not AsyncOpenAI with base_url)","mem0 azure_openai embedder requires azure-identity package","mem0 VectorStoreConfig._provider_configs is ModelPrivateAttr — use .default dict","mem0 AsyncMemory.add() returns {results: [...]} — LTMService.add() unwraps first result","Docker PYTHONPATH=/app/src because uv sync --no-install-project doesnt install maas package"]}
{"type":"relation","from":"MaaS","to":"CodingConventions","relationType":"follows"}
{"type":"relation","from":"MaaS","to":"ProjectLayout","relationType":"has_structure"}
{"type":"relation","from":"MaaS","to":"DevSetup","relationType":"setup_via"}
{"type":"relation","from":"MaaS","to":"KeyGotchas","relationType":"has_gotchas"}